{% extends 'index.html' %}
{% load static %}

{% block content %}
{% block extra_css %}
<style>
.container {
  margin-top: 5%;
  max-width: 1000px;
}

/* Input fields for bank info */
.readonly-input {
  background-color: #e9ecef;
  pointer-events: none;
  margin-bottom: 1rem;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .container { margin-top: 8%; }
}
@media (max-width: 576px) {
  .container { margin-top: 15%; padding: 10px; }
  h2, h4 { font-size: 1.1rem; }
  .readonly-input { font-size: 0.9rem; }
}
</style>
{% endblock extra_css %}

<div class="container">
  <h2 class="mb-3">Bank Info</h2>
  <div class="row g-3">
    <div class="col-md-4">
      <label>Bank Name</label>
      <input type="text" class="form-control readonly-input" value="{{ bank.name }}" readonly>
    </div>
    <div class="col-md-4">
      <label>Branch</label>
      <input type="text" class="form-control readonly-input" value="{{ bank.branch }}" readonly>
    </div>
    <div class="col-md-4">
      <label>IFSC</label>
      <input type="text" class="form-control readonly-input" value="{{ bank.ifsc }}" readonly>
    </div>
    <div class="col-md-4">
      <label>State</label>
      <input type="text" class="form-control readonly-input" value="{{ bank.state }}" readonly>
    </div>
    <div class="col-md-4">
      <label>Balance</label>
      <input type="text" class="form-control readonly-input" value="₹ {{ bank.balance }}" readonly>
    </div>
    <div class="col-md-4">
      <label>No. of Customers</label>
      <input type="text" class="form-control readonly-input" value="{{ customer_count }}" readonly>
    </div>
  </div>

  <h4 class="mt-4">Recent 10 Transactions</h4>
<div class="table-responsive">
  <table class="table table-hover table-bordered align-middle text-center">
    <thead class="table-light">
      <tr>
        <th>Date/Time</th>
        <th>Account No</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Balance Before</th>
        <th>Balance After</th>
      </tr>
    </thead>
    <tbody>
      {% for tx in transactions %}
      <tr>
        <td>{{ tx.date|date:"d-m-Y H:i" }}</td>
        <td>*****{{ tx.customer.account_no|slice:"-4:" }}</td>
        <td>{{ tx.transaction_type }}</td>
        <td>₹ {{ tx.amount }}</td>
        <td>₹ {{ tx.balance_before }}</td>
        <td>₹ {{ tx.balance_after }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="7" class="text-center">No transactions found</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
</div>
{% endblock content %}
